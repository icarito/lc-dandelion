<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$.ui</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">plugin</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">add</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">,</span><span class="NAME">option</span><span class="PUNC">,</span><span class="NAME">set</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">proto</span><span class="PUNC">=</span><span class="NAME">$.ui</span><span class="PUNC">[</span><span class="NAME">module</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">prototype</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">set</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">proto.plugins</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">proto.plugins</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">proto.plugins</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">option</span><span class="PUNC">,</span><span class="NAME">set</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">call</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">instance</span><span class="PUNC">,</span><span class="NAME">name</span><span class="PUNC">,</span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">set</span><span class="PUNC">=</span><span class="NAME">instance.plugins</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">set</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>  2</span> </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">set.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">instance.options</span><span class="PUNC">[</span><span class="NAME">set</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">set</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">instance.element</span><span class="PUNC">,</span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">cssCache</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">css</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.ui.cssCache</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">$.ui.cssCache</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>  3</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tmp</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">'&lt;div class="ui-resizable-gen">'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addClass</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">position</span><span class="PUNC">:</span><span class="STRN">'absolute'</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="STRN">'-5000px'</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="STRN">'-5000px'</span><span class="PUNC">,</span><span class="NAME">display</span><span class="PUNC">:</span><span class="STRN">'block'</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendTo</span><span class="PUNC">(</span><span class="STRN">'body'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.cssCache</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="REGX">/auto|default/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">tmp.css</span><span class="PUNC">(</span><span class="STRN">'cursor'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="REGX">/^[1-9]/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">tmp.css</span><span class="PUNC">(</span><span class="STRN">'height'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="REGX">/^[1-9]/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">tmp.css</span><span class="PUNC">(</span><span class="STRN">'width'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="REGX">/none/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">tmp.css</span><span class="PUNC">(</span><span class="STRN">'backgroundImage'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="REGX">/transparent|rgba\(0, 0, 0, 0\)/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">tmp.css</span><span class="PUNC">(</span><span class="STRN">'backgroundColor'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">'body'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeChild</span><span class="PUNC">(</span><span class="NAME">tmp.get</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>  4</span> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">$.ui.cssCache</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">disableSelection</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.unselectable</span><span class="PUNC">=</span><span class="STRN">"on"</span><span class="PUNC">;</span><span class="NAME">e.onselectstart</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.style</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.style.MozUserSelect</span><span class="PUNC">=</span><span class="STRN">"none"</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">enableSelection</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.unselectable</span><span class="PUNC">=</span><span class="STRN">"off"</span><span class="PUNC">;</span><span class="NAME">e.onselectstart</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.style</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.style.MozUserSelect</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">hasScroll</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scroll</span><span class="PUNC">=</span><span class="REGX">/top/</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">||</span><span class="STRN">"top"</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="STRN">'scrollTop'</span><span class="PUNC">:</span><span class="STRN">'scrollLeft'</span><span class="PUNC">,</span><span class="NAME">has</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">scroll</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">scroll</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">has</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">scroll</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="KEYW">true</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">scroll</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">has</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">_remove</span><span class="PUNC">=</span><span class="NAME">$.fn.remove</span><span class="PUNC">;</span><span class="NAME">$.fn.remove</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"*"</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">trigger</span><span class="PUNC">(</span><span class="STRN">"remove"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">_remove.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">getter</span><span class="PUNC">(</span><span class="NAME">namespace</span><span class="PUNC">,</span><span class="NAME">plugin</span><span class="PUNC">,</span><span class="NAME">method</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">methods</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">[</span><span class="NAME">namespace</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">plugin</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getter</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">methods</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">methods</span><span class="PUNC">==</span><span class="STRN">"string"</span><span class="PUNC">?</span><span class="NAME">methods.split</span><span class="PUNC">(</span><span class="REGX">/,?\s+/</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">methods</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">$.inArray</span><span class="PUNC">(</span><span class="NAME">method</span><span class="PUNC">,</span><span class="NAME">methods</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>  5</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">widgetPrototype</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">init</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.element.removeData</span><span class="PUNC">(</span><span class="NAME">this.widgetName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getData</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setData</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">value</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">enable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.setData</span><span class="PUNC">(</span><span class="STRN">'disabled'</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">disable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.setData</span><span class="PUNC">(</span><span class="STRN">'disabled'</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$.widget</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="NAME">prototype</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">namespace</span><span class="PUNC">=</span><span class="NAME">name.split</span><span class="PUNC">(</span><span class="STRN">"."</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">name</span><span class="PUNC">=</span><span class="NAME">name.split</span><span class="PUNC">(</span><span class="STRN">"."</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">$.fn</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isMethodCall</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">options</span><span class="PUNC">==</span><span class="STRN">'string'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">args</span><span class="PUNC">=</span><span class="NAME">Array.prototype.slice.call</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">isMethodCall</span><span class="PUNC">&&</span><span class="NAME">getter</span><span class="PUNC">(</span><span class="NAME">namespace</span><span class="PUNC">,</span><span class="NAME">name</span><span class="PUNC">,</span><span class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">instance</span><span class="PUNC">=</span><span class="NAME">$.data</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">instance</span><span class="PUNC">?</span><span class="NAME">instance</span><span class="PUNC">[</span><span class="NAME">options</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">instance</span><span class="PUNC">,</span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>  6</span> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.each</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">instance</span><span class="PUNC">=</span><span class="NAME">$.data</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">instance</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$.data</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">name</span><span class="PUNC">,</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">[</span><span class="NAME">namespace</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">isMethodCall</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">instance</span><span class="PUNC">[</span><span class="NAME">options</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">instance</span><span class="PUNC">,</span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$</span><span class="PUNC">[</span><span class="NAME">namespace</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">,</span><span class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">self</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.widgetName</span><span class="PUNC">=</span><span class="NAME">name</span><span class="PUNC">;</span><span class="NAME">this.options</span><span class="PUNC">=</span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">$</span><span class="PUNC">[</span><span class="NAME">namespace</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">defaults</span><span class="PUNC">,</span><span class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.element</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="STRN">'setData.'</span><span class="PUNC">+</span><span class="NAME">name</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">key</span><span class="PUNC">,</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">self.setData</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="STRN">'getData.'</span><span class="PUNC">+</span><span class="NAME">name</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">self.getData</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="STRN">'remove'</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">self.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.init</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$</span><span class="PUNC">[</span><span class="NAME">namespace</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">prototype</span><span class="PUNC">=</span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">widgetPrototype</span><span class="PUNC">,</span><span class="NAME">prototype</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$.ui.mouse</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">mouseInit</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">self</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.element.bind</span><span class="PUNC">(</span><span class="STRN">'mousedown.'</span><span class="PUNC">+</span><span class="NAME">this.widgetName</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">self.mouseDown</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.browser.msie</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._mouseUnselectable</span><span class="PUNC">=</span><span class="NAME">this.element.attr</span><span class="PUNC">(</span><span class="STRN">'unselectable'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.element.attr</span><span class="PUNC">(</span><span class="STRN">'unselectable'</span><span class="PUNC">,</span><span class="STRN">'on'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>  7</span> </span><span class="NAME">this.started</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseDestroy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.element.unbind</span><span class="PUNC">(</span><span class="STRN">'.'</span><span class="PUNC">+</span><span class="NAME">this.widgetName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="NAME">$.browser.msie</span><span class="PUNC">&&</span><span class="NAME">this.element.attr</span><span class="PUNC">(</span><span class="STRN">'unselectable'</span><span class="PUNC">,</span><span class="NAME">this._mouseUnselectable</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseDown</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">(</span><span class="NAME">this._mouseStarted</span><span class="PUNC">&&</span><span class="NAME">this.mouseUp</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._mouseDownEvent</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">self</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">btnIsLeft</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">e.which</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">elIsCancel</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">e.target</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">is</span><span class="PUNC">(</span><span class="NAME">this.options.cancel</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">btnIsLeft</span><span class="PUNC">||</span><span class="NAME">elIsCancel</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>  8</span> </span><span class="NAME">this._mouseDelayMet</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">this.options.delay</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._mouseDelayMet</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._mouseDelayTimer</span><span class="PUNC">=</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">self._mouseDelayMet</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this.options.delay</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>  9</span> </span><span class="NAME">this._mouseMoveDelegate</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">self.mouseMove</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this._mouseUpDelegate</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">self.mouseUp</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="STRN">'mousemove.'</span><span class="PUNC">+</span><span class="NAME">this.widgetName</span><span class="PUNC">,</span><span class="NAME">this._mouseMoveDelegate</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="STRN">'mouseup.'</span><span class="PUNC">+</span><span class="NAME">this.widgetName</span><span class="PUNC">,</span><span class="NAME">this._mouseUpDelegate</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseMove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.browser.msie</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">e.button</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.mouseUp</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 10</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._mouseStarted</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.mouseDrag</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 11</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.mouseDistanceMet</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this.mouseDelayMet</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._mouseStarted</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">this.mouseStart</span><span class="PUNC">(</span><span class="NAME">this._mouseDownEvent</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="NAME">this._mouseStarted</span><span class="PUNC">||</span><span class="NAME">this.mouseUp</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 12</span> </span><span class="KEYW">return</span><span class="PUNC">!</span><span class="NAME">this._mouseStarted</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseUp</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">unbind</span><span class="PUNC">(</span><span class="STRN">'mousemove.'</span><span class="PUNC">+</span><span class="NAME">this.widgetName</span><span class="PUNC">,</span><span class="NAME">this._mouseMoveDelegate</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">unbind</span><span class="PUNC">(</span><span class="STRN">'mouseup.'</span><span class="PUNC">+</span><span class="NAME">this.widgetName</span><span class="PUNC">,</span><span class="NAME">this._mouseUpDelegate</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._mouseStarted</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._mouseStarted</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">this.mouseStop</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 13</span> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseDistanceMet</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this._mouseDownEvent.pageX</span><span class="PUNC">-</span><span class="NAME">e.pageX</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">this._mouseDownEvent.pageY</span><span class="PUNC">-</span><span class="NAME">e.pageY</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">>=</span><span class="NAME">this.options.distance</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseDelayMet</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._mouseDelayMet</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseStart</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseDrag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseStop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$.ui.mouse.defaults</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">cancel</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">distance</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">delay</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="NAME">jQuery</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$.widget</span><span class="PUNC">(</span><span class="STRN">"ui.draggable"</span><span class="PUNC">,</span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="NAME">$.ui.mouse</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">init</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.helper</span><span class="PUNC">==</span><span class="STRN">'original'</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="REGX">/(relative|absolute|fixed)/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">this.element.css</span><span class="PUNC">(</span><span class="STRN">'position'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 14</span> </span><span class="NAME">this.element.css</span><span class="PUNC">(</span><span class="STRN">'position'</span><span class="PUNC">,</span><span class="STRN">'relative'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.element.addClass</span><span class="PUNC">(</span><span class="STRN">'ui-draggable'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="NAME">o.disabled</span><span class="PUNC">&&</span><span class="NAME">this.element.addClass</span><span class="PUNC">(</span><span class="STRN">'ui-draggable-disabled'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.mouseInit</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setData</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">,</span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">==</span><span class="STRN">'disabled'</span><span class="PUNC">&&</span><span class="NAME">this.element</span><span class="PUNC">[</span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">?</span><span class="STRN">'add'</span><span class="PUNC">:</span><span class="STRN">'remove'</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">'Class'</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="STRN">'ui-draggable-disabled'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">value</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseStart</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.helper</span><span class="PUNC">||</span><span class="NAME">o.disabled</span><span class="PUNC">||</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">e.target</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">is</span><span class="PUNC">(</span><span class="STRN">'.ui-resizable-handle'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">handle</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">this.options.handle</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">this.options.handle</span><span class="PUNC">,</span><span class="NAME">this.element</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">?</span><span class="KEYW">true</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">handle</span><span class="PUNC">)</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">this.options.handle</span><span class="PUNC">,</span><span class="NAME">this.element</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">==</span><span class="NAME">e.target</span><span class="PUNC">)</span><span class="NAME">handle</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">handle</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.ui.ddmanager</span><span class="PUNC">)</span><span class="NAME">$.ui.ddmanager.current</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.helper</span><span class="PUNC">=</span><span class="NAME">$.isFunction</span><span class="PUNC">(</span><span class="NAME">o.helper</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">o.helper.apply</span><span class="PUNC">(</span><span class="NAME">this.element</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">o.helper</span><span class="PUNC">==</span><span class="STRN">'clone'</span><span class="PUNC">?</span><span class="NAME">this.element.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">this.element</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.helper.parents</span><span class="PUNC">(</span><span class="STRN">'body'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">)</span><span class="NAME">this.helper.appendTo</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">o.appendTo</span><span class="PUNC">==</span><span class="STRN">'parent'</span><span class="PUNC">?</span><span class="NAME">this.element</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">parentNode</span><span class="PUNC">:</span><span class="NAME">o.appendTo</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.helper</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NAME">this.element</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="REGX">/(fixed|absolute)/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">this.helper.css</span><span class="PUNC">(</span><span class="STRN">"position"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="NAME">this.helper.css</span><span class="PUNC">(</span><span class="STRN">"position"</span><span class="PUNC">,</span><span class="STRN">"absolute"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.margins</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.element.css</span><span class="PUNC">(</span><span class="STRN">"marginLeft"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.element.css</span><span class="PUNC">(</span><span class="STRN">"marginTop"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.cssPosition</span><span class="PUNC">=</span><span class="NAME">this.helper.css</span><span class="PUNC">(</span><span class="STRN">"position"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.offset</span><span class="PUNC">=</span><span class="NAME">this.element.offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.offset</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">this.offset.top</span><span class="PUNC">-</span><span class="NAME">this.margins.top</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">this.offset.left</span><span class="PUNC">-</span><span class="NAME">this.margins.left</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.offset.click</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">e.pageX</span><span class="PUNC">-</span><span class="NAME">this.offset.left</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">e.pageY</span><span class="PUNC">-</span><span class="NAME">this.offset.top</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.offsetParent</span><span class="PUNC">=</span><span class="NAME">this.helper.offsetParent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">po</span><span class="PUNC">=</span><span class="NAME">this.offsetParent.offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.offset.parent</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">po.top</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.offsetParent.css</span><span class="PUNC">(</span><span class="STRN">"borderTopWidth"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">po.left</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.offsetParent.css</span><span class="PUNC">(</span><span class="STRN">"borderLeftWidth"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">this.element.position</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.offset.relative</span><span class="PUNC">=</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"relative"</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">p.top</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.helper.css</span><span class="PUNC">(</span><span class="STRN">"top"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">p.left</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.helper.css</span><span class="PUNC">(</span><span class="STRN">"left"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.originalPosition</span><span class="PUNC">=</span><span class="NAME">this.generatePosition</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.helperProportions</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NAME">this.helper.outerWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NAME">this.helper.outerHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.cursorAt</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.cursorAt.left</span><span class="PUNC">!=</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="NAME">this.offset.click.left</span><span class="PUNC">=</span><span class="NAME">o.cursorAt.left</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.cursorAt.right</span><span class="PUNC">!=</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="NAME">this.offset.click.left</span><span class="PUNC">=</span><span class="NAME">this.helperProportions.width</span><span class="PUNC">-</span><span class="NAME">o.cursorAt.right</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.cursorAt.top</span><span class="PUNC">!=</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="NAME">this.offset.click.top</span><span class="PUNC">=</span><span class="NAME">o.cursorAt.top</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.cursorAt.bottom</span><span class="PUNC">!=</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="NAME">this.offset.click.top</span><span class="PUNC">=</span><span class="NAME">this.helperProportions.height</span><span class="PUNC">-</span><span class="NAME">o.cursorAt.bottom</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 15</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.containment</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.containment</span><span class="PUNC">==</span><span class="STRN">'parent'</span><span class="PUNC">)</span><span class="NAME">o.containment</span><span class="PUNC">=</span><span class="NAME">this.helper</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">parentNode</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.containment</span><span class="PUNC">==</span><span class="STRN">'document'</span><span class="PUNC">)</span><span class="NAME">this.containment</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">width</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">height</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">document.body.parentNode.scrollHeight</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="REGX">/^(document|window|parent)$/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">o.containment</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ce</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">o.containment</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">co</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">o.containment</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.containment</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">co.left</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ce</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">"borderLeftWidth"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">this.offset.relative.left</span><span class="PUNC">-</span><span class="NAME">this.offset.parent.left</span><span class="PUNC">,</span><span class="NAME">co.top</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ce</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">"borderTopWidth"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">this.offset.relative.top</span><span class="PUNC">-</span><span class="NAME">this.offset.parent.top</span><span class="PUNC">,</span><span class="NAME">co.left</span><span class="PUNC">+</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">ce.scrollWidth</span><span class="PUNC">,</span><span class="NAME">ce.offsetWidth</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ce</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">"borderLeftWidth"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">this.offset.relative.left</span><span class="PUNC">-</span><span class="NAME">this.offset.parent.left</span><span class="PUNC">-</span><span class="NAME">this.helperProportions.width</span><span class="PUNC">-</span><span class="NAME">this.margins.left</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.element.css</span><span class="PUNC">(</span><span class="STRN">"marginRight"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">co.top</span><span class="PUNC">+</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">ce.scrollHeight</span><span class="PUNC">,</span><span class="NAME">ce.offsetHeight</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ce</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">"borderTopWidth"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">this.offset.relative.top</span><span class="PUNC">-</span><span class="NAME">this.offset.parent.top</span><span class="PUNC">-</span><span class="NAME">this.helperProportions.height</span><span class="PUNC">-</span><span class="NAME">this.margins.top</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.element.css</span><span class="PUNC">(</span><span class="STRN">"marginBottom"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 16</span> </span><span class="NAME">this.propagate</span><span class="PUNC">(</span><span class="STRN">"start"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.helperProportions</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NAME">this.helper.outerWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NAME">this.helper.outerHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.ui.ddmanager</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o.dropBehaviour</span><span class="PUNC">)</span><span class="NAME">$.ui.ddmanager.prepareOffsets</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.helper.addClass</span><span class="PUNC">(</span><span class="STRN">"ui-draggable-dragging"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.mouseDrag</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">convertPositionTo</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">pos</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">pos</span><span class="PUNC">)</span><span class="NAME">pos</span><span class="PUNC">=</span><span class="NAME">this.position</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mod</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">==</span><span class="STRN">"absolute"</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">pos.top</span><span class="WHIT">
<span class='line'> 17</span> </span><span class="PUNC">+</span><span class="NAME">this.offset.relative.top</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="WHIT">
<span class='line'> 18</span> </span><span class="PUNC">+</span><span class="NAME">this.offset.parent.top</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="WHIT">
<span class='line'> 19</span> </span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"fixed"</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"absolute"</span><span class="PUNC">&&</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">document.body</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="WHIT">
<span class='line'> 20</span> </span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"fixed"</span><span class="PUNC">?</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="WHIT">
<span class='line'> 21</span> </span><span class="PUNC">+</span><span class="NAME">this.margins.top</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">pos.left</span><span class="WHIT">
<span class='line'> 22</span> </span><span class="PUNC">+</span><span class="NAME">this.offset.relative.left</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="WHIT">
<span class='line'> 23</span> </span><span class="PUNC">+</span><span class="NAME">this.offset.parent.left</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="WHIT">
<span class='line'> 24</span> </span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"fixed"</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"absolute"</span><span class="PUNC">&&</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">document.body</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="WHIT">
<span class='line'> 25</span> </span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"fixed"</span><span class="PUNC">?</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="WHIT">
<span class='line'> 26</span> </span><span class="PUNC">+</span><span class="NAME">this.margins.left</span><span class="PUNC">*</span><span class="NAME">mod</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">generatePosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">e.pageY</span><span class="WHIT">
<span class='line'> 27</span> </span><span class="PUNC">-</span><span class="NAME">this.offset.click.top</span><span class="WHIT">
<span class='line'> 28</span> </span><span class="PUNC">-</span><span class="NAME">this.offset.relative.top</span><span class="WHIT">
<span class='line'> 29</span> </span><span class="PUNC">-</span><span class="NAME">this.offset.parent.top</span><span class="WHIT">
<span class='line'> 30</span> </span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"fixed"</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"absolute"</span><span class="PUNC">&&</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">document.body</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 31</span> </span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"fixed"</span><span class="PUNC">?</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">e.pageX</span><span class="WHIT">
<span class='line'> 32</span> </span><span class="PUNC">-</span><span class="NAME">this.offset.click.left</span><span class="WHIT">
<span class='line'> 33</span> </span><span class="PUNC">-</span><span class="NAME">this.offset.relative.left</span><span class="WHIT">
<span class='line'> 34</span> </span><span class="PUNC">-</span><span class="NAME">this.offset.parent.left</span><span class="WHIT">
<span class='line'> 35</span> </span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"fixed"</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"absolute"</span><span class="PUNC">&&</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">document.body</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 36</span> </span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">this.cssPosition</span><span class="PUNC">==</span><span class="STRN">"fixed"</span><span class="PUNC">?</span><span class="NAME">this.offsetParent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.originalPosition</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.containment</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">position.left</span><span class="PUNC">&lt;</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="NAME">position.left</span><span class="PUNC">=</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">position.top</span><span class="PUNC">&lt;</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="NAME">position.top</span><span class="PUNC">=</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">position.left</span><span class="PUNC">></span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="NAME">position.left</span><span class="PUNC">=</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">position.top</span><span class="PUNC">></span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="NAME">position.top</span><span class="PUNC">=</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 37</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">o.grid</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">top</span><span class="PUNC">=</span><span class="NAME">this.originalPosition.top</span><span class="PUNC">+</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">position.top</span><span class="PUNC">-</span><span class="NAME">this.originalPosition.top</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">o.grid</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">o.grid</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">position.top</span><span class="PUNC">=</span><span class="NAME">this.containment</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">top</span><span class="PUNC">&lt;</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">top</span><span class="PUNC">></span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">top</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">top</span><span class="PUNC">&lt;</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">top</span><span class="PUNC">-</span><span class="NAME">o.grid</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">top</span><span class="PUNC">+</span><span class="NAME">o.grid</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">top</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">left</span><span class="PUNC">=</span><span class="NAME">this.originalPosition.left</span><span class="PUNC">+</span><span class="NAME">Math.round</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">position.left</span><span class="PUNC">-</span><span class="NAME">this.originalPosition.left</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">o.grid</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">o.grid</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">position.left</span><span class="PUNC">=</span><span class="NAME">this.containment</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">left</span><span class="PUNC">&lt;</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">left</span><span class="PUNC">></span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">left</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">left</span><span class="PUNC">&lt;</span><span class="NAME">this.containment</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">left</span><span class="PUNC">-</span><span class="NAME">o.grid</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">left</span><span class="PUNC">+</span><span class="NAME">o.grid</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">left</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 38</span> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseDrag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.position</span><span class="PUNC">=</span><span class="NAME">this.generatePosition</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.positionAbs</span><span class="PUNC">=</span><span class="NAME">this.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"absolute"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.position</span><span class="PUNC">=</span><span class="NAME">this.propagate</span><span class="PUNC">(</span><span class="STRN">"drag"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">this.position</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.axis</span><span class="PUNC">||</span><span class="NAME">this.options.axis</span><span class="PUNC">==</span><span class="STRN">"x"</span><span class="PUNC">)</span><span class="NAME">this.helper</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.left</span><span class="PUNC">=</span><span class="NAME">this.position.left</span><span class="PUNC">+</span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.axis</span><span class="PUNC">||</span><span class="NAME">this.options.axis</span><span class="PUNC">==</span><span class="STRN">"y"</span><span class="PUNC">)</span><span class="NAME">this.helper</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.top</span><span class="PUNC">=</span><span class="NAME">this.position.top</span><span class="PUNC">+</span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.ui.ddmanager</span><span class="PUNC">)</span><span class="NAME">$.ui.ddmanager.drag</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">mouseStop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.ui.ddmanager</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this.options.dropBehaviour</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 39</span> </span><span class="NAME">$.ui.ddmanager.drop</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.revert</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">self</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">this.helper</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">animate</span><span class="PUNC">(</span><span class="NAME">this.originalPosition</span><span class="PUNC">,</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.options.revert</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NUMB">500</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">self.propagate</span><span class="PUNC">(</span><span class="STRN">"stop"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">self.clear</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">this.propagate</span><span class="PUNC">(</span><span class="STRN">"stop"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.clear</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 40</span> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">clear</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.helper.removeClass</span><span class="PUNC">(</span><span class="STRN">"ui-draggable-dragging"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.helper</span><span class="PUNC">!=</span><span class="STRN">'original'</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">this.cancelHelperRemoval</span><span class="PUNC">)</span><span class="NAME">this.helper.remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.ui.ddmanager</span><span class="PUNC">)</span><span class="NAME">$.ui.ddmanager.current</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.helper</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.cancelHelperRemoval</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">plugins</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">uiHash</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">helper</span><span class="PUNC">:</span><span class="NAME">this.helper</span><span class="PUNC">,</span><span class="NAME">position</span><span class="PUNC">:</span><span class="NAME">this.position</span><span class="PUNC">,</span><span class="NAME">absolutePosition</span><span class="PUNC">:</span><span class="NAME">this.positionAbs</span><span class="PUNC">,</span><span class="NAME">options</span><span class="PUNC">:</span><span class="NAME">this.options</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">propagate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$.ui.plugin.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.uiHash</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.element.triggerHandler</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">==</span><span class="STRN">"drag"</span><span class="PUNC">?</span><span class="NAME">n</span><span class="PUNC">:</span><span class="STRN">"drag"</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.uiHash</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.options</span><span class="PUNC">[</span><span class="NAME">n</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.element.data</span><span class="PUNC">(</span><span class="STRN">'draggable'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="NAME">this.element.removeData</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">unbind</span><span class="PUNC">(</span><span class="STRN">".draggable"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeClass</span><span class="PUNC">(</span><span class="STRN">'ui-draggable'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.mouseDestroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="NAME">$.ui.draggable</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">defaults</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">distance</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">delay</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">cancel</span><span class="PUNC">:</span><span class="STRN">":input,button"</span><span class="PUNC">,</span><span class="NAME">helper</span><span class="PUNC">:</span><span class="STRN">"original"</span><span class="PUNC">,</span><span class="NAME">appendTo</span><span class="PUNC">:</span><span class="STRN">"parent"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">,</span><span class="STRN">"cursor"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">'body'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">"cursor"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="NAME">ui.options._cursor</span><span class="PUNC">=</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">"cursor"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">"cursor"</span><span class="PUNC">,</span><span class="NAME">ui.options.cursor</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ui.options._cursor</span><span class="PUNC">)</span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">'body'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">"cursor"</span><span class="PUNC">,</span><span class="NAME">ui.options._cursor</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">,</span><span class="STRN">"zIndex"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ui.helper</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">"zIndex"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="NAME">ui.options._zIndex</span><span class="PUNC">=</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">"zIndex"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">'zIndex'</span><span class="PUNC">,</span><span class="NAME">ui.options.zIndex</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ui.options._zIndex</span><span class="PUNC">)</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ui.helper</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">'zIndex'</span><span class="PUNC">,</span><span class="NAME">ui.options._zIndex</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">,</span><span class="STRN">"opacity"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ui.helper</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">"opacity"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="NAME">ui.options._opacity</span><span class="PUNC">=</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">"opacity"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t.css</span><span class="PUNC">(</span><span class="STRN">'opacity'</span><span class="PUNC">,</span><span class="NAME">ui.options.opacity</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ui.options._opacity</span><span class="PUNC">)</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ui.helper</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">'opacity'</span><span class="PUNC">,</span><span class="NAME">ui.options._opacity</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">,</span><span class="STRN">"iframeFix"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ui.options.iframeFix</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">?</span><span class="STRN">"iframe"</span><span class="PUNC">:</span><span class="NAME">ui.options.iframeFix</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">'&lt;div class="ui-draggable-iframeFix" style="background: #fff;">&lt;/div>'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NAME">this.offsetWidth</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NAME">this.offsetHeight</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">,</span><span class="NAME">position</span><span class="PUNC">:</span><span class="STRN">"absolute"</span><span class="PUNC">,</span><span class="NAME">opacity</span><span class="PUNC">:</span><span class="STRN">"0.001"</span><span class="PUNC">,</span><span class="NAME">zIndex</span><span class="PUNC">:</span><span class="NUMB">1000</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendTo</span><span class="PUNC">(</span><span class="STRN">"body"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"div.DragDropIframeFix"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.parentNode.removeChild</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">,</span><span class="STRN">"scroll"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">ui.options</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">=</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">||</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">=</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">||</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="NAME">i.overflowY</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">el</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">do</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="REGX">/auto|scroll/</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">el.css</span><span class="PUNC">(</span><span class="STRN">'overflow'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="REGX">/auto|scroll/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">el.css</span><span class="PUNC">(</span><span class="STRN">'overflow-y'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">el</span><span class="PUNC">;</span><span class="NAME">el</span><span class="PUNC">=</span><span class="NAME">el.parent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">el</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">parentNode</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.overflowX</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">el</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">do</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="REGX">/auto|scroll/</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">el.css</span><span class="PUNC">(</span><span class="STRN">'overflow'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="REGX">/auto|scroll/</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">test</span><span class="PUNC">(</span><span class="NAME">el.css</span><span class="PUNC">(</span><span class="STRN">'overflow-x'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">el</span><span class="PUNC">;</span><span class="NAME">el</span><span class="PUNC">=</span><span class="NAME">el.parent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">el</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">parentNode</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NAME">document</span><span class="PUNC">&&</span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">tagName</span><span class="PUNC">!=</span><span class="STRN">'HTML'</span><span class="PUNC">)</span><span class="NAME">i.overflowYOffset</span><span class="PUNC">=</span><span class="NAME">i.overflowY.offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NAME">document</span><span class="PUNC">&&</span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">tagName</span><span class="PUNC">!=</span><span class="STRN">'HTML'</span><span class="PUNC">)</span><span class="NAME">i.overflowXOffset</span><span class="PUNC">=</span><span class="NAME">i.overflowX.offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">ui.options</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NAME">document</span><span class="PUNC">&&</span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">tagName</span><span class="PUNC">!=</span><span class="STRN">'HTML'</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">i.overflowYOffset.top</span><span class="PUNC">+</span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">offsetHeight</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">e.pageY</span><span class="PUNC">&lt;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 41</span> </span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">=</span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">+</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.pageY</span><span class="PUNC">-</span><span class="NAME">i.overflowYOffset.top</span><span class="PUNC">&lt;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 42</span> </span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">=</span><span class="NAME">i.overflowY</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">-</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.pageY</span><span class="PUNC">-</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 43</span> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">height</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">e.pageY</span><span class="PUNC">-</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 44</span> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollTop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 45</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NAME">document</span><span class="PUNC">&&</span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">tagName</span><span class="PUNC">!=</span><span class="STRN">'HTML'</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">i.overflowXOffset.left</span><span class="PUNC">+</span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">offsetWidth</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">e.pageX</span><span class="PUNC">&lt;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 46</span> </span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">=</span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">+</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.pageX</span><span class="PUNC">-</span><span class="NAME">i.overflowXOffset.left</span><span class="PUNC">&lt;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 47</span> </span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">=</span><span class="NAME">i.overflowX</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">-</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.pageX</span><span class="PUNC">-</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 48</span> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">width</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">e.pageX</span><span class="PUNC">-</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">o.scrollSensitivity</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 49</span> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">scrollLeft</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">o.scrollSpeed</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">,</span><span class="STRN">"snap"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">inst</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">inst.snapElements</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ui.options.snap</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">?</span><span class="STRN">'.ui-draggable'</span><span class="PUNC">:</span><span class="NAME">ui.options.snap</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">$t</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">$o</span><span class="PUNC">=</span><span class="NAME">$t.offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">!=</span><span class="NAME">inst.element</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="NAME">inst.snapElements.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">item</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NAME">$t.outerWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NAME">$t.outerHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">$o.top</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">$o.left</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">inst</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">ui.options.snapTolerance</span><span class="PUNC">||</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">x1</span><span class="PUNC">=</span><span class="NAME">ui.absolutePosition.left</span><span class="PUNC">,</span><span class="NAME">x2</span><span class="PUNC">=</span><span class="NAME">x1</span><span class="PUNC">+</span><span class="NAME">inst.helperProportions.width</span><span class="PUNC">,</span><span class="NAME">y1</span><span class="PUNC">=</span><span class="NAME">ui.absolutePosition.top</span><span class="PUNC">,</span><span class="NAME">y2</span><span class="PUNC">=</span><span class="NAME">y1</span><span class="PUNC">+</span><span class="NAME">inst.helperProportions.height</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">inst.snapElements.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">inst.snapElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">+</span><span class="NAME">inst.snapElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">width</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">inst.snapElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NAME">inst.snapElements</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">height</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">x1</span><span class="PUNC">&&</span><span class="NAME">x1</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">y1</span><span class="PUNC">&&</span><span class="NAME">y1</span><span class="PUNC">&lt;</span><span class="NAME">b</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">x1</span><span class="PUNC">&&</span><span class="NAME">x1</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">y2</span><span class="PUNC">&&</span><span class="NAME">y2</span><span class="PUNC">&lt;</span><span class="NAME">b</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">x2</span><span class="PUNC">&&</span><span class="NAME">x2</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">y1</span><span class="PUNC">&&</span><span class="NAME">y1</span><span class="PUNC">&lt;</span><span class="NAME">b</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">x2</span><span class="PUNC">&&</span><span class="NAME">x2</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">&lt;</span><span class="NAME">y2</span><span class="PUNC">&&</span><span class="NAME">y2</span><span class="PUNC">&lt;</span><span class="NAME">b</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ui.options.snapMode</span><span class="PUNC">!=</span><span class="STRN">'inner'</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ts</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">y2</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bs</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">-</span><span class="NAME">y1</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ls</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">x2</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rs</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">-</span><span class="NAME">x1</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ts</span><span class="PUNC">)</span><span class="NAME">ui.position.top</span><span class="PUNC">=</span><span class="NAME">inst.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"relative"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">inst.helperProportions.height</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bs</span><span class="PUNC">)</span><span class="NAME">ui.position.top</span><span class="PUNC">=</span><span class="NAME">inst.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"relative"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ls</span><span class="PUNC">)</span><span class="NAME">ui.position.left</span><span class="PUNC">=</span><span class="NAME">inst.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"relative"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">inst.helperProportions.width</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">rs</span><span class="PUNC">)</span><span class="NAME">ui.position.left</span><span class="PUNC">=</span><span class="NAME">inst.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"relative"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">r</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 50</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ui.options.snapMode</span><span class="PUNC">!=</span><span class="STRN">'outer'</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ts</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">y1</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bs</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">-</span><span class="NAME">y2</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ls</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">x1</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rs</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">-</span><span class="NAME">x2</span><span class="PUNC">)</span><span class="PUNC">&lt;=</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ts</span><span class="PUNC">)</span><span class="NAME">ui.position.top</span><span class="PUNC">=</span><span class="NAME">inst.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"relative"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bs</span><span class="PUNC">)</span><span class="NAME">ui.position.top</span><span class="PUNC">=</span><span class="NAME">inst.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"relative"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">b</span><span class="PUNC">-</span><span class="NAME">inst.helperProportions.height</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ls</span><span class="PUNC">)</span><span class="NAME">ui.position.left</span><span class="PUNC">=</span><span class="NAME">inst.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"relative"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">rs</span><span class="PUNC">)</span><span class="NAME">ui.position.left</span><span class="PUNC">=</span><span class="NAME">inst.convertPositionTo</span><span class="PUNC">(</span><span class="STRN">"relative"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">r</span><span class="PUNC">-</span><span class="NAME">inst.helperProportions.width</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">,</span><span class="STRN">"connectToSortable"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">inst</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">inst.sortables</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ui.options.connectToSortable</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$.data</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">'sortable'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">sortable</span><span class="PUNC">=</span><span class="NAME">$.data</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">'sortable'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">inst.sortables.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">instance</span><span class="PUNC">:</span><span class="NAME">sortable</span><span class="PUNC">,</span><span class="NAME">shouldRevert</span><span class="PUNC">:</span><span class="NAME">sortable.options.revert</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">sortable.refresh</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">sortable.propagate</span><span class="PUNC">(</span><span class="STRN">"activate"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">inst</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">inst</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.each</span><span class="PUNC">(</span><span class="NAME">inst.sortables</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.instance.isOver</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.instance.isOver</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">inst.cancelHelperRemoval</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">this.instance.cancelHelperRemoval</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.shouldRevert</span><span class="PUNC">)</span><span class="NAME">this.instance.options.revert</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">this.instance.mouseStop</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.instance.element.triggerHandler</span><span class="PUNC">(</span><span class="STRN">"sortreceive"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="NAME">this.instance.ui</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">sender</span><span class="PUNC">:</span><span class="NAME">inst.element</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.instance.options</span><span class="PUNC">[</span><span class="STRN">"receive"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.instance.options.helper</span><span class="PUNC">=</span><span class="NAME">this.instance.options._helper</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">this.instance.propagate</span><span class="PUNC">(</span><span class="STRN">"deactivate"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">inst</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">inst</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">self</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">checkPos</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">o.left</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">+</span><span class="NAME">o.width</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">o.top</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NAME">o.height</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">&lt;</span><span class="PUNC">(</span><span class="NAME">this.positionAbs.left</span><span class="PUNC">+</span><span class="NAME">this.offset.click.left</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this.positionAbs.left</span><span class="PUNC">+</span><span class="NAME">this.offset.click.left</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&lt;</span><span class="PUNC">(</span><span class="NAME">this.positionAbs.top</span><span class="PUNC">+</span><span class="NAME">this.offset.click.top</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">this.positionAbs.top</span><span class="PUNC">+</span><span class="NAME">this.offset.click.top</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$.each</span><span class="PUNC">(</span><span class="NAME">inst.sortables</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">checkPos.call</span><span class="PUNC">(</span><span class="NAME">inst</span><span class="PUNC">,</span><span class="NAME">this.instance.containerCache</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.instance.isOver</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.instance.isOver</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">this.instance.currentItem</span><span class="PUNC">=</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">self</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">appendTo</span><span class="PUNC">(</span><span class="NAME">this.instance.element</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">data</span><span class="PUNC">(</span><span class="STRN">"sortable-item"</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.instance.options._helper</span><span class="PUNC">=</span><span class="NAME">this.instance.options.helper</span><span class="PUNC">;</span><span class="NAME">this.instance.options.helper</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ui.helper</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">e.target</span><span class="PUNC">=</span><span class="NAME">this.instance.currentItem</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.instance.mouseStart</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.instance.offset.click.top</span><span class="PUNC">=</span><span class="NAME">inst.offset.click.top</span><span class="PUNC">;</span><span class="NAME">this.instance.offset.click.left</span><span class="PUNC">=</span><span class="NAME">inst.offset.click.left</span><span class="PUNC">;</span><span class="NAME">this.instance.offset.parent.left</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">inst.offset.parent.left</span><span class="PUNC">-</span><span class="NAME">this.instance.offset.parent.left</span><span class="PUNC">;</span><span class="NAME">this.instance.offset.parent.top</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">inst.offset.parent.top</span><span class="PUNC">-</span><span class="NAME">this.instance.offset.parent.top</span><span class="PUNC">;</span><span class="NAME">inst.propagate</span><span class="PUNC">(</span><span class="STRN">"toSortable"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 51</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.instance.currentItem</span><span class="PUNC">)</span><span class="NAME">this.instance.mouseDrag</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.instance.isOver</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.instance.isOver</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">this.instance.cancelHelperRemoval</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">this.instance.options.revert</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">this.instance.mouseStop</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.instance.options.helper</span><span class="PUNC">=</span><span class="NAME">this.instance.options._helper</span><span class="PUNC">;</span><span class="NAME">this.instance.currentItem.remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.instance.placeholder.remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">inst.propagate</span><span class="PUNC">(</span><span class="STRN">"fromSortable"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"draggable"</span><span class="PUNC">,</span><span class="STRN">"stack"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">group</span><span class="PUNC">=</span><span class="NAME">$.makeArray</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">ui.options.stack.group</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">sort</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">"zIndex"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">ui.options.stack.min</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">css</span><span class="PUNC">(</span><span class="STRN">"zIndex"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">ui.options.stack.min</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">group</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.style.zIndex</span><span class="PUNC">=</span><span class="NAME">ui.options.stack.min</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.zIndex</span><span class="PUNC">=</span><span class="NAME">ui.options.stack.min</span><span class="PUNC">+</span><span class="NAME">group.length</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="NAME">jQuery</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$.widget</span><span class="PUNC">(</span><span class="STRN">"ui.droppable"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">init</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.element.addClass</span><span class="PUNC">(</span><span class="STRN">"ui-droppable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.isover</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">this.isout</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">this.options</span><span class="PUNC">,</span><span class="NAME">accept</span><span class="PUNC">=</span><span class="NAME">o.accept</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">accept</span><span class="PUNC">:</span><span class="NAME">o.accept</span><span class="PUNC">&&</span><span class="NAME">o.accept.constructor</span><span class="PUNC">==</span><span class="NAME">Function</span><span class="PUNC">?</span><span class="NAME">o.accept</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">is</span><span class="PUNC">(</span><span class="NAME">accept</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.proportions</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NAME">this.element.outerWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NAME">this.element.outerHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$.ui.ddmanager.droppables.push</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">plugins</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">instance</span><span class="PUNC">:</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">draggable</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">c.currentItem</span><span class="PUNC">||</span><span class="NAME">c.element</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">helper</span><span class="PUNC">:</span><span class="NAME">c.helper</span><span class="PUNC">,</span><span class="NAME">position</span><span class="PUNC">:</span><span class="NAME">c.position</span><span class="PUNC">,</span><span class="NAME">absolutePosition</span><span class="PUNC">:</span><span class="NAME">c.positionAbs</span><span class="PUNC">,</span><span class="NAME">options</span><span class="PUNC">:</span><span class="NAME">this.options</span><span class="PUNC">,</span><span class="NAME">element</span><span class="PUNC">:</span><span class="NAME">this.element</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">drop</span><span class="PUNC">=</span><span class="NAME">$.ui.ddmanager.droppables</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">drop.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 52</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">drop</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 53</span> </span><span class="NAME">drop.splice</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.element.removeClass</span><span class="PUNC">(</span><span class="STRN">"ui-droppable ui-droppable-disabled"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeData</span><span class="PUNC">(</span><span class="STRN">"droppable"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">unbind</span><span class="PUNC">(</span><span class="STRN">".droppable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">enable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.element.removeClass</span><span class="PUNC">(</span><span class="STRN">"ui-droppable-disabled"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.options.disabled</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">disable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.element.addClass</span><span class="PUNC">(</span><span class="STRN">"ui-droppable-disabled"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.options.disabled</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">over</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">draggable</span><span class="PUNC">=</span><span class="NAME">$.ui.ddmanager.current</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">draggable</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">draggable.currentItem</span><span class="PUNC">||</span><span class="NAME">draggable.element</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">this.element</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.accept.call</span><span class="PUNC">(</span><span class="NAME">this.element</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">draggable.currentItem</span><span class="PUNC">||</span><span class="NAME">draggable.element</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$.ui.plugin.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">'over'</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.element.triggerHandler</span><span class="PUNC">(</span><span class="STRN">"dropover"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.options.over</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">out</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">draggable</span><span class="PUNC">=</span><span class="NAME">$.ui.ddmanager.current</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">draggable</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">draggable.currentItem</span><span class="PUNC">||</span><span class="NAME">draggable.element</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">this.element</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.accept.call</span><span class="PUNC">(</span><span class="NAME">this.element</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">draggable.currentItem</span><span class="PUNC">||</span><span class="NAME">draggable.element</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$.ui.plugin.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">'out'</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.element.triggerHandler</span><span class="PUNC">(</span><span class="STRN">"dropout"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.options.out</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">drop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">custom</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">draggable</span><span class="PUNC">=</span><span class="NAME">custom</span><span class="PUNC">||</span><span class="NAME">$.ui.ddmanager.current</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">draggable</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">draggable.currentItem</span><span class="PUNC">||</span><span class="NAME">draggable.element</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">this.element</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">childrenIntersection</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">this.element.find</span><span class="PUNC">(</span><span class="STRN">".ui-droppable"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">not</span><span class="PUNC">(</span><span class="STRN">".ui-draggable-dragging"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">inst</span><span class="PUNC">=</span><span class="NAME">$.data</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">'droppable'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">inst.options.greedy</span><span class="PUNC">&&</span><span class="NAME">$.ui.intersect</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">,</span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="NAME">inst</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="NAME">inst.element.offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">inst.options.tolerance</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">childrenIntersection</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">childrenIntersection</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.accept.call</span><span class="PUNC">(</span><span class="NAME">this.element</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">draggable.currentItem</span><span class="PUNC">||</span><span class="NAME">draggable.element</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$.ui.plugin.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">'drop'</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.element.triggerHandler</span><span class="PUNC">(</span><span class="STRN">"drop"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.options.drop</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 54</span> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">activate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">draggable</span><span class="PUNC">=</span><span class="NAME">$.ui.ddmanager.current</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">'activate'</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="NAME">this.element.triggerHandler</span><span class="PUNC">(</span><span class="STRN">"dropactivate"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.options.activate</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">deactivate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">draggable</span><span class="PUNC">=</span><span class="NAME">$.ui.ddmanager.current</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="STRN">'deactivate'</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="NAME">this.element.triggerHandler</span><span class="PUNC">(</span><span class="STRN">"dropdeactivate"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">this.ui</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.options.deactivate</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.extend</span><span class="PUNC">(</span><span class="NAME">$.ui.droppable</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">defaults</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">disabled</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">tolerance</span><span class="PUNC">:</span><span class="STRN">'intersect'</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.intersect</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">,</span><span class="NAME">droppable</span><span class="PUNC">,</span><span class="NAME">toleranceMode</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">droppable.offset</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">x1</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">draggable.positionAbs</span><span class="PUNC">||</span><span class="NAME">draggable.position.absolute</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">,</span><span class="NAME">x2</span><span class="PUNC">=</span><span class="NAME">x1</span><span class="PUNC">+</span><span class="NAME">draggable.helperProportions.width</span><span class="PUNC">,</span><span class="NAME">y1</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">draggable.positionAbs</span><span class="PUNC">||</span><span class="NAME">draggable.position.absolute</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">,</span><span class="NAME">y2</span><span class="PUNC">=</span><span class="NAME">y1</span><span class="PUNC">+</span><span class="NAME">draggable.helperProportions.height</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">droppable.offset.left</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">+</span><span class="NAME">droppable.proportions.width</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">droppable.offset.top</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NAME">droppable.proportions.height</span><span class="PUNC">;</span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">toleranceMode</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">case</span><span class="STRN">'fit'</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">&lt;</span><span class="NAME">x1</span><span class="PUNC">&&</span><span class="NAME">x2</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&lt;</span><span class="NAME">y1</span><span class="PUNC">&&</span><span class="NAME">y2</span><span class="PUNC">&lt;</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="KEYW">case</span><span class="STRN">'intersect'</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">&lt;</span><span class="NAME">x1</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">draggable.helperProportions.width</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">x2</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">draggable.helperProportions.width</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&lt;</span><span class="NAME">y1</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">draggable.helperProportions.height</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">y2</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">draggable.helperProportions.height</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="KEYW">case</span><span class="STRN">'pointer'</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">&lt;</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">draggable.positionAbs</span><span class="PUNC">||</span><span class="NAME">draggable.position.absolute</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">draggable.clickOffset</span><span class="PUNC">||</span><span class="NAME">draggable.offset.click</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">draggable.positionAbs</span><span class="PUNC">||</span><span class="NAME">draggable.position.absolute</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">draggable.clickOffset</span><span class="PUNC">||</span><span class="NAME">draggable.offset.click</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&lt;</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">draggable.positionAbs</span><span class="PUNC">||</span><span class="NAME">draggable.position.absolute</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">draggable.clickOffset</span><span class="PUNC">||</span><span class="NAME">draggable.offset.click</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">draggable.positionAbs</span><span class="PUNC">||</span><span class="NAME">draggable.position.absolute</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">draggable.clickOffset</span><span class="PUNC">||</span><span class="NAME">draggable.offset.click</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="KEYW">case</span><span class="STRN">'touch'</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">y1</span><span class="PUNC">>=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">y1</span><span class="PUNC">&lt;=</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">y2</span><span class="PUNC">>=</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">y2</span><span class="PUNC">&lt;=</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">y1</span><span class="PUNC">&lt;</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="NAME">y2</span><span class="PUNC">></span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">x1</span><span class="PUNC">>=</span><span class="NAME">l</span><span class="PUNC">&&</span><span class="NAME">x1</span><span class="PUNC">&lt;=</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">x2</span><span class="PUNC">>=</span><span class="NAME">l</span><span class="PUNC">&&</span><span class="NAME">x2</span><span class="PUNC">&lt;=</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">x1</span><span class="PUNC">&lt;</span><span class="NAME">l</span><span class="PUNC">&&</span><span class="NAME">x2</span><span class="PUNC">></span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="KEYW">default</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$.ui.ddmanager</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">current</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">droppables</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">prepareOffsets</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">$.ui.ddmanager.droppables</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">type</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">?</span><span class="NAME">e.type</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">m.length</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">options.disabled</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">options.accept.call</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">element</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">t.currentItem</span><span class="PUNC">||</span><span class="NAME">t.element</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">visible</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">element.is</span><span class="PUNC">(</span><span class="STRN">":visible"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">visible</span><span class="PUNC">)</span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">offset</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">element.offset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">proportions</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">element.outerWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">element.outerHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">type</span><span class="PUNC">==</span><span class="STRN">"dragstart"</span><span class="PUNC">||</span><span class="NAME">type</span><span class="PUNC">==</span><span class="STRN">"sortactivate"</span><span class="PUNC">)</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">activate.call</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">drop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dropped</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">$.each</span><span class="PUNC">(</span><span class="NAME">$.ui.ddmanager.droppables</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.disabled</span><span class="PUNC">&&</span><span class="NAME">this.visible</span><span class="PUNC">&&</span><span class="NAME">$.ui.intersect</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">this.options.tolerance</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 55</span> </span><span class="NAME">dropped</span><span class="PUNC">=</span><span class="NAME">this.drop.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.disabled</span><span class="PUNC">&&</span><span class="NAME">this.visible</span><span class="PUNC">&&</span><span class="NAME">this.options.accept.call</span><span class="PUNC">(</span><span class="NAME">this.element</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">draggable.currentItem</span><span class="PUNC">||</span><span class="NAME">draggable.element</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.isout</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">this.isover</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">this.deactivate.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">dropped</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">draggable.options.refreshPositions</span><span class="PUNC">)</span><span class="NAME">$.ui.ddmanager.prepareOffsets</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.each</span><span class="PUNC">(</span><span class="NAME">$.ui.ddmanager.droppables</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.disabled</span><span class="PUNC">||</span><span class="NAME">this.greedyChild</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">this.visible</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">intersects</span><span class="PUNC">=</span><span class="NAME">$.ui.intersect</span><span class="PUNC">(</span><span class="NAME">draggable</span><span class="PUNC">,</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">this.options.tolerance</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">intersects</span><span class="PUNC">&&</span><span class="NAME">this.isover</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="STRN">'isout'</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">intersects</span><span class="PUNC">&&</span><span class="NAME">this.isover</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="STRN">'isover'</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">c</span><span class="PUNC">)</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">parentInstance</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.greedy</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">=</span><span class="NAME">this.element.parents</span><span class="PUNC">(</span><span class="STRN">'.ui-droppable:eq(0)'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">parent.length</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">parentInstance</span><span class="PUNC">=</span><span class="NAME">$.data</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="STRN">'droppable'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">parentInstance.greedyChild</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">==</span><span class="STRN">'isover'</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 56</span> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">parentInstance</span><span class="PUNC">&&</span><span class="NAME">c</span><span class="PUNC">==</span><span class="STRN">'isover'</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">parentInstance</span><span class="PUNC">[</span><span class="STRN">'isover'</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">parentInstance</span><span class="PUNC">[</span><span class="STRN">'isout'</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">parentInstance.out.call</span><span class="PUNC">(</span><span class="NAME">parentInstance</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 57</span> </span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">c</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">c</span><span class="PUNC">==</span><span class="STRN">'isout'</span><span class="PUNC">?</span><span class="STRN">'isover'</span><span class="PUNC">:</span><span class="STRN">'isout'</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">c</span><span class="PUNC">==</span><span class="STRN">"isover"</span><span class="PUNC">?</span><span class="STRN">"over"</span><span class="PUNC">:</span><span class="STRN">"out"</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">parentInstance</span><span class="PUNC">&&</span><span class="NAME">c</span><span class="PUNC">==</span><span class="STRN">'isout'</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">parentInstance</span><span class="PUNC">[</span><span class="STRN">'isout'</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">parentInstance</span><span class="PUNC">[</span><span class="STRN">'isover'</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">parentInstance.over.call</span><span class="PUNC">(</span><span class="NAME">parentInstance</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"droppable"</span><span class="PUNC">,</span><span class="STRN">"activeClass"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">activate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addClass</span><span class="PUNC">(</span><span class="NAME">ui.options.activeClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">deactivate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeClass</span><span class="PUNC">(</span><span class="NAME">ui.options.activeClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">drop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeClass</span><span class="PUNC">(</span><span class="NAME">ui.options.activeClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">$.ui.plugin.add</span><span class="PUNC">(</span><span class="STRN">"droppable"</span><span class="PUNC">,</span><span class="STRN">"hoverClass"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">over</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addClass</span><span class="PUNC">(</span><span class="NAME">ui.options.hoverClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">out</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeClass</span><span class="PUNC">(</span><span class="NAME">ui.options.hoverClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">drop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">ui</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">$</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeClass</span><span class="PUNC">(</span><span class="NAME">ui.options.hoverClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="NAME">jQuery</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>