'From MIT Squeak 0.9.4 (June 1, 2003) [No updates present.] on 30 April 2008 at 1:48:03 pm'!ExpressionArgMorph subclass: #ExpressionArgMorphWithMenu	instanceVariableNames: 'menuMorph getMenuSelector '	classVariableNames: ''	poolDictionaries: ''	category: 'Scratch-Blocks'!!ExpressionArgMorphWithMenu commentStamp: 'jm 3/28/2005 15:10' prior: 0!I represent a literal value such as a number or string. I can be edited by typing or a value can be chosen from a pull-down menu.!!ExpressionArgMorphWithMenu methodsFor: 'other' stamp: 'jm 12/17/2004 12:54'!menuSelector: menuSelector	"Add a drop-down menu button with the given selector. The selector should result in a menu whose action items are values that can be put into this type argument, typically numbers or strings."	menuMorph _ ImageMorph new form: DropDownMenuForm.	getMenuSelector _ menuSelector.	self addMorphFront: menuMorph.	self fixArgLayout.! !!ExpressionArgMorphWithMenu methodsFor: 'event handling' stamp: 'jm 1/23/2007 12:37'!handlesMouseDown: evt	^ menuMorph notNil! !!ExpressionArgMorphWithMenu methodsFor: 'event handling' stamp: 'jm 10/23/2007 00:06'!mouseDown: evt	| rcvr menu choice |	menuMorph ifNil: [^ super mouseDown: evt].	(evt cursorPoint x < (menuMorph left - 1)) ifTrue: [^ super mouseDown: evt].	(getMenuSelector notNil and:	 [(owner isKindOf: BlockMorph) and: 	 [(rcvr _ owner receiver) notNil]]) ifFalse: [^ self beep].	menu _ rcvr perform: getMenuSelector.	(menu isKindOf: ScratchNoteSelector) ifTrue: [		menu position: owner bottomLeft + (((owner width - menu width) // 2) @ -4)].	choice _ menu startUp.	choice ifNil: [^ self].	evt hand newKeyboardFocus: nil.  "close mini-editor, if any"	isNumber		ifTrue: [self numExpression: choice]		ifFalse: [self stringExpression: choice].! !!ExpressionArgMorphWithMenu methodsFor: 'object i/o' stamp: 'jm 12/17/2004 14:12'!fieldsVersion	^ 1! !!ExpressionArgMorphWithMenu methodsFor: 'object i/o' stamp: 'jm 12/17/2004 14:12'!initFieldsFrom: anObjStream version: classVersion	super initFieldsFrom: anObjStream version: classVersion.	self initFieldsNamed: #(		menuMorph		getMenuSelector	) from: anObjStream.! !!ExpressionArgMorphWithMenu methodsFor: 'object i/o' stamp: 'jm 12/17/2004 14:13'!storeFieldsOn: anObjStream	super storeFieldsOn: anObjStream.	self storeFieldsNamed: #(		menuMorph		getMenuSelector	) on: anObjStream.! !!ExpressionArgMorphWithMenu methodsFor: 'private' stamp: 'jm 12/31/2005 10:42'!fixArgLayout	menuMorph ifNil: [^ super fixArgLayout].	self width: labelMorph width + 10.	menuMorph position: (self right - 10)@(self top + 5).! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ExpressionArgMorphWithMenu class	instanceVariableNames: ''!!ExpressionArgMorphWithMenu class methodsFor: 'class initialization' stamp: 'jm 3/29/2005 20:43'!initialize	"self initialize"	DropDownMenuForm _ Form		extent: 7@4		depth: 1		fromArray: #(4261412864 2080374784 939524096 268435456)		offset: 0@0.	DropDownMenuForm _ DropDownMenuForm colorReduced.  "become a ColorForm"	DropDownMenuForm colors:		(Array with: Color transparent with: (Color gray: 0.25)).! !ExpressionArgMorphWithMenu initialize!